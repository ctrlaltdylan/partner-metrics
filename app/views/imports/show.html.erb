<%= turbo_stream_from [current_user, :imports] %>

<%= polaris_page(
  narrow_width: true,
  title: t(".title"),
  id: dom_id(@import),
  back_url: imports_path,
) do |page| %>

  <% page.with_title_metadata do %>
    <%= render "status", import: @import %>
  <% end %>

  <%= render @import %>

  <%= polaris_page_actions do |actions| %>
    <% actions.with_secondary_action(
      destructive: true,
      outline: true,
      url: @import,
      data: {turbo_method: :delete},
    ) { "Delete import" } %>
  <% end %>

<% end %>

<br><br>
<%= tag.div style: "width: 100%; height: 900px; opacity: 0; transition: opacity 3s ease-in-out;",
    data: {
      controller: "globe",
      globe_target: "container",
      globe_fetch_url_value: import_globe_path(@import, offset: 0),
    } %>
