<% !user_signed_in? || unless content_for?(:hide_navigation) %>
  <% frame.with_navigation do |navigation| %>

    <% navigation.with_section(fill: true) do |section| %>
      <% section.with_item(
        url: metrics_path,
        label: "Metrics",
        icon: "AnalyticsMajor",
        selected: nav_item_selected?(metrics_path),
        link_arguments: {}
      ) do |item| %>
        <% Metric::CHARGE_TYPES.each do |charge_type|%>
          <% item.with_sub_item(
            url: metrics_path(charge_type: charge_type),
            label: t("metrics.#{charge_type}.title"),
            selected: nav_item_selected?(metrics_path(charge_type: charge_type)),
            link_arguments: {}
          ) %>
        <% end %>
      <% end %>

      <% section.with_item(
        url: payments_path,
        label: "Payments",
        icon: "CashDollarMajor",
        selected: nav_item_selected?(payments_path),
        link_arguments: {}
      ) %>
    <% end %>

    <% navigation.with_section(title: "Data sources") do |section| %>
      <% section.with_item(
        url: imports_path,
        label: "Imported data",
        icon: "ImportMinor",
        selected: nav_item_selected?(imports_path),
        link_arguments: {}
      ) %>
      <% section.with_item(
        url: edit_user_registration_path(current_user),
        label: "Partner API",
        icon: "InsertDynamicSourceMajor",
        selected: nav_item_selected?(edit_user_registration_path(current_user)),
        link_arguments: {}
      ) %>
    <% end %>

  <% end %>
<% end %>
