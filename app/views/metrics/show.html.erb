<%= polaris_page(
  title: t("metrics.#{@filter.charge_type}.title"),
  subtitle: t("metrics.#{@filter.charge_type}.subtitle"),
) do |page| %>

  <%= turbo_frame_tag :metrics do %>

    <%= polaris_vertical_stack(gap: "5") do %>

      <%= render "filter", filter: @filter, app_titles: @app_titles %>

      <% if @filter.has_metrics? %>

          <%= render "tile_with_chart", tile: @selected_tile, filter: @filter %>

          <%= polaris_horizontal_grid(gap: "5", columns: 3) do %>
            <% @tiles.each do |tile| %>
              <%= render "tile", tile: tile, filter: @filter %>
            <% end %>
          <% end %>

          <%#= render "#{params[:controller]}/revenue_per", q: current_query %>

      <% else %>

        <%= render "shared/empty_state", resource: Metric %>

      <% end %>

    <% end %>

  <% end %>

<% end %>
